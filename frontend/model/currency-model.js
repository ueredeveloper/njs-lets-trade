
// model/currency-model.js
const CurrencyModel = {
  currencies: [],
  filters: [
    {
      name: '1h|Binance|USDT',
      // Lista atualizada em 30/08/2024
      list: [
    "ETHUSDT",
    "BTCUSDT",
    "USDCUSDT",
    "BNBUSDT",
    "SOLUSDT",
    "FDUSDUSDT",
    "XRPUSDT",
    "DOGEUSDT",
    "EDENUSDT",
    "ASTERUSDT",
    "SUIUSDT",
    "XPLUSDT",
    "TAOUSDT",
    "ADAUSDT",
    "ZECUSDT",
    "TRXUSDT",
    "USDEUSDT",
    "CAKEUSDT",
    "PEPEUSDT",
    "AVAXUSDT",
    "ENSOUSDT",
    "LINKUSDT",
    "ENAUSDT",
    "LTCUSDT",
    "PUMPUSDT",
    "FORMUSDT",
    "2ZUSDT",
    "PAXGUSDT",
    "BCHUSDT",
    "SNXUSDT",
    "FFUSDT",
    "WLFIUSDT",
    "FETUSDT",
    "PENGUUSDT",
    "NEARUSDT",
    "HBARUSDT",
    "WIFUSDT",
    "WLDUSDT",
    "ALICEUSDT",
    "ARBUSDT",
    "UNIUSDT",
    "CRVUSDT",
    "OMUSDT",
    "AAVEUSDT",
    "DOTUSDT",
    "BONKUSDT",
    "EULUSDT",
    "OPUSDT",
    "TRUMPUSDT",
    "ONDOUSDT",
    "FILUSDT",
    "SEIUSDT",
    "XLMUSDT",
    "ZENUSDT",
    "LDOUSDT",
    "APTUSDT",
    "SYRUPUSDT",
    "ARPAUSDT",
    "EURUSDT",
    "SUSDT",
    "ETHFIUSDT",
    "DASHUSDT",
    "XUSDUSDT",
    "TIAUSDT",
    "LINEAUSDT",
    "ETCUSDT",
    "FLOKIUSDT",
    "EIGENUSDT",
    "USD1USDT",
    "MIRAUSDT",
    "TUTUSDT",
    "PENDLEUSDT",
    "WALUSDT",
    "SHIBUSDT",
    "TONUSDT",
    "BERAUSDT",
    "RENDERUSDT",
    "AVNTUSDT",
    "INJUSDT",
    "ICPUSDT",
    "POLUSDT",
    "NEIROUSDT",
    "PNUTUSDT",
    "MAGICUSDT",
    "ALPINEUSDT",
    "ARKMUSDT",
    "BELUSDT",
    "VIRTUALUSDT",
    "ATOMUSDT",
    "GALAUSDT",
    "WBTCUSDT",
    "UMAUSDT",
    "BATUSDT",
    "TWTUSDT",
    "BBUSDT",
    "STRKUSDT",
    "RSRUSDT",
    "OGUSDT",
    "SOMIUSDT",
    "BFUSDUSDT",
    "MORPHOUSDT",
    "DYDXUSDT",
    "CFXUSDT",
    "EDUUSDT",
    "ORDIUSDT",
    "ALGOUSDT",
    "RAYUSDT",
    "WUSDT",
    "0GUSDT",
    "SHELLUSDT",
    "RUNEUSDT",
    "VETUSDT",
    "BARDUSDT",
    "PYTHUSDT",
    "PLUMEUSDT",
    "APEUSDT",
    "HEMIUSDT",
    "BIOUSDT",
    "PSGUSDT",
    "DEXEUSDT",
    "SUSHIUSDT",
    "1000CHEEMSUSDT",
    "TRBUSDT",
    "LAUSDT",
    "LISTAUSDT",
    "ENSUSDT",
    "WBETHUSDT",
    "JSTUSDT",
    "NOMUSDT",
    "ZKCUSDT",
    "REZUSDT",
    "ARUSDT",
    "SAHARAUSDT",
    "NEOUSDT",
    "ZROUSDT",
    "PROVEUSDT",
    "BROCCOLI714USDT",
    "YGGUSDT",
    "MEMEUSDT",
    "XAIUSDT",
    "PEOPLEUSDT",
    "SOLVUSDT",
    "THEUSDT",
    "TLMUSDT",
    "SUNUSDT",
    "WCTUSDT",
    "ZKUSDT",
    "IOTAUSDT",
    "MANAUSDT",
    "OPENUSDT",
    "SPKUSDT",
    "AUSDT",
    "SKLUSDT",
    "BNSOLUSDT",
    "1000SATSUSDT",
    "IMXUSDT",
    "KERNELUSDT",
    "AIXBTUSDT",
    "1MBABYDOGEUSDT",
    "SANDUSDT",
    "DEGOUSDT",
    "RDNTUSDT",
    "API3USDT",
    "MBLUSDT",
    "JUPUSDT",
    "MUBARAKUSDT",
    "SKYUSDT",
    "TSTUSDT",
    "PROMUSDT",
    "BANANAS31USDT",
    "JASMYUSDT",
    "INITUSDT",
    "IOUSDT",
    "IOTXUSDT",
    "COMPUSDT",
    "CVXUSDT",
    "KAIAUSDT",
    "NOTUSDT",
    "HOLOUSDT",
    "CHZUSDT",
    "DUSDT",
    "THETAUSDT",
    "BOMEUSDT",
    "RADUSDT",
    "KAITOUSDT",
    "HOMEUSDT",
    "EPICUSDT",
    "MBOXUSDT",
    "ADXUSDT",
    "AXSUSDT",
    "JTOUSDT",
    "BEAMXUSDT",
    "DOLOUSDT",
    "SSVUSDT",
    "PIXELUSDT",
    "CELOUSDT",
    "ACTUSDT",
    "XVGUSDT",
    "HYPERUSDT",
    "GRTUSDT",
    "COOKIEUSDT",
    "STOUSDT",
    "KAVAUSDT",
    "ALTUSDT",
    "TURBOUSDT",
    "USUALUSDT",
    "HUMAUSDT",
    "STXUSDT",
    "ROSEUSDT",
    "QNTUSDT",
    "MINAUSDT",
    "LUNCUSDT",
    "SAGAUSDT",
    "GMTUSDT",
    "SANTOSUSDT",
    "STGUSDT",
    "KMNOUSDT",
    "BABYUSDT",
    "ASRUSDT",
    "ACHUSDT",
    "YFIUSDT",
    "ANIMEUSDT",
    "FXSUSDT",
    "ASTRUSDT",
    "AEVOUSDT",
    "ERAUSDT",
    "LPTUSDT",
    "TREEUSDT",
    "MOVEUSDT",
    "SUPERUSDT",
    "PIVXUSDT",
    "DOGSUSDT",
    "RONINUSDT",
    "RLCUSDT",
    "AIUSDT",
    "SXTUSDT",
    "BANANAUSDT",
    "KSMUSDT",
    "USDPUSDT",
    "SYSUSDT",
    "JUVUSDT",
    "MANTAUSDT",
    "KDAUSDT",
    "EGLDUSDT",
    "HAEDALUSDT",
    "CATIUSDT",
    "ORCAUSDT",
    "VANAUSDT",
    "VANRYUSDT",
    "MAVUSDT",
    "HOOKUSDT",
    "ILVUSDT",
    "ZRXUSDT",
    "CHRUSDT",
    "RESOLVUSDT",
    "HEIUSDT",
    "SCRUSDT",
    "NMRUSDT",
    "MDTUSDT",
    "ONEUSDT",
    "STORJUSDT",
    "PHBUSDT",
    "1INCHUSDT",
    "XTZUSDT",
    "CUSDT",
    "C98USDT",
    "METISUSDT",
    "ZILUSDT",
    "CETUSUSDT",
    "HFTUSDT",
    "PUNDIXUSDT",
    "CKBUSDT",
    "ATMUSDT",
    "RAREUSDT",
    "QTUMUSDT",
    "SIGNUSDT",
    "CITYUSDT",
    "BMTUSDT",
    "LUNAUSDT",
    "NXPCUSDT",
    "SOPHUSDT",
    "MITOUSDT",
    "FIDAUSDT",
    "COWUSDT",
    "EURIUSDT",
    "BARUSDT",
    "AUCTIONUSDT",
    "1000CATUSDT",
    "BANDUSDT",
    "CYBERUSDT",
    "CTKUSDT",
    "BLURUSDT",
    "USTCUSDT",
    "DYMUSDT",
    "MASKUSDT",
    "FISUSDT",
    "LAYERUSDT",
    "ACEUSDT",
    "COTIUSDT",
    "GUNUSDT",
    "PHAUSDT",
    "XVSUSDT",
    "PORTALUSDT",
    "IDUSDT",
    "NILUSDT",
    "FLUXUSDT",
    "IOSTUSDT",
    "A2ZUSDT",
    "HIGHUSDT",
    "GPSUSDT",
    "WOOUSDT",
    "HIVEUSDT",
    "FTTUSDT",
    "GMXUSDT",
    "FARMUSDT",
    "FLOWUSDT",
    "TOWNSUSDT",
    "REDUSDT",
    "ANKRUSDT",
    "SCRTUSDT",
    "VICUSDT",
    "RPLUSDT",
    "AWEUSDT",
    "CHESSUSDT",
    "HOTUSDT",
    "SFPUSDT",
    "FUNUSDT",
    "AXLUSDT",
    "LRCUSDT",
    "CGPTUSDT",
    "PARTIUSDT",
    "BIGTIMEUSDT",
    "ENJUSDT",
    "VELODROMEUSDT",
    "RVNUSDT",
    "GLMRUSDT",
    "LUMIAUSDT",
    "SLPUSDT",
    "AGLDUSDT",
    "ACAUSDT",
    "KNCUSDT",
    "STRAXUSDT",
    "SYNUSDT",
    "ICXUSDT",
    "ACXUSDT",
    "TRUUSDT",
    "NFPUSDT",
    "LAZIOUSDT",
    "GTCUSDT",
    "LQTYUSDT",
    "FIOUSDT",
    "VOXELUSDT",
    "COSUSDT",
    "ONGUSDT",
    "NEXOUSDT",
    "VTHOUSDT",
    "AVAUSDT",
    "TNSRUSDT",
    "IQUSDT",
    "ARKUSDT",
    "POLYXUSDT",
    "MEUSDT",
    "MTLUSDT",
    "AUDIOUSDT",
    "DUSKUSDT",
    "GASUSDT",
    "STEEMUSDT",
    "AMPUSDT",
    "MOVRUSDT",
    "MLNUSDT",
    "ACMUSDT",
    "GLMUSDT",
    "PERPUSDT",
    "NEWTUSDT",
    "DENTUSDT",
    "CVCUSDT",
    "IDEXUSDT",
    "ONTUSDT",
    "DIAUSDT",
    "DODOUSDT",
    "TUSDT",
    "BTTCUSDT",
    "OGNUSDT",
    "BICOUSDT",
    "TFUELUSDT",
    "HMSTRUSDT",
    "NKNUSDT",
    "DFUSDT",
    "GUSDT",
    "SPELLUSDT",
    "XECUSDT",
    "SXPUSDT",
    "POWRUSDT",
    "WAXPUSDT",
    "LSKUSDT",
    "PYRUSDT",
    "DGBUSDT",
    "JOEUSDT",
    "RIFUSDT",
    "CELRUSDT",
    "DCRUSDT",
    "SCUSDT",
    "QUICKUSDT",
    "FLMUSDT",
    "CTSIUSDT",
    "NTRNUSDT",
    "DATAUSDT",
    "WINUSDT",
    "TUSDUSDT",
    "OXTUSDT",
    "PORTOUSDT",
    "PONDUSDT",
    "TKOUSDT",
    "UTKUSDT",
    "WANUSDT",
    "GNOUSDT",
    "ATAUSDT",
    "XNOUSDT",
    "BNTUSDT",
    "GNSUSDT",
    "OSMOUSDT",
    "FORTHUSDT",
    "REQUSDT",
    "QIUSDT",
    "ALCXUSDT",
    "GHSTUSDT",
    "REIUSDT",
    "QKCUSDT",
    "ARDRUSDT",
    "BIFIUSDT",
    "AEURUSDT"
]
    },
  ],
  quotes: ['USDT', 'BTC', 'BNB'],

  addCurrency: function (item) {
    let index = this.currencies.list.findIndex(obj => obj.symbol === item.symbol);

    // Se o objeto for econtrado, edite.
    if (index !== -1) {
      this.currencies[index] = item;
    }
  },
  getAllCurrencies: async function () {
    return await this.currencies;
  },
  getBinanceCurrenciesWithUsdt: async function (currencies) {

    let bincanceCurrenciesWithUsdt = this.filters[0].list;
    // Moedas estáveis que não quero capturar
    let stableCurrencies = ["TUSDUSDT", "USDPUSDT", "FDUSDUSDT", "EURIUSDT", "XUSDUSDT", "USDCUSDT", "EURUSDT"];


    let filteredCurrenciesByBinanceWithUsdt = currencies.list.filter(currency => bincanceCurrenciesWithUsdt.includes(currency.symbol) && !stableCurrencies.includes(currency.symbol));

    return filteredCurrenciesByBinanceWithUsdt;

  },
  addFilter: async function (item) {

    let index = this.filters.findIndex(obj => obj.name === item.name);

    // Se o objeto for econtrado, edite.
    if (index !== -1) {
      this.filters[index] = item;
    } else {
      this.filters.push(item)
    }


  },
  getQuotes: function () {
    return this.quotes;
  },
  getFilters: function () {
    return this.filters;
  },
  findFilter: function (name) {
    let filter = this.filters.find(filter => filter.name === name)

    return filter;
  },
  findCurrency: function () {
    this.currencies.list.find(currency.symbol)
  },
  joinFilters: function (selectedFilters) {

    let name = selectedFilters.join('|')

    let data = this.filters.filter(f => selectedFilters.includes(f.name))

    function getCommonSymbols(arrays) {
      if (arrays.length === 0) return [];

      // Start with the first list
      let commonSymbols = arrays[0].list;

      // Iterate through the remaining lists
      for (let i = 1; i < arrays.length; i++) {
        commonSymbols = commonSymbols.filter(symbol => arrays[i].list.includes(symbol));
      }

      return commonSymbols;
    }

    const commonSymbols = getCommonSymbols(data);

    this.addFilter({
      name: name,
      list: commonSymbols
    })

  },
  clearAllFilters: function () {
    this.filters = this.filters.filter(f => f.name === '1h|Binance|USDT')
  },
  removeFilters: function (filtersToRemove) {
    // Não pode remover o primeiro filtro
    let firstFilter = this.filters[0]
    let newFilters = this.filters.filter(f => !filtersToRemove.includes(f.name));
    this.filters = []
    this.filters.push(firstFilter);
    // Retira repetições
    let setFilters = new Set([firstFilter, ...newFilters])
    this.filters = Array.from(setFilters)

  },

  getForTestIndicatorsAndCurrencies: async function () {

    try {
      let response = await fetch('./indicators-and-currencies.json');  // Fetch the JSON file
      if (!response.ok) {
        throw new Error('Network response was not ok');
      }
      let data = await response.json();
      return data;  // Return the JSON data
    } catch (error) {
      console.error('There has been a problem with your fetch operation:', error);
      return null;  // Return null or handle the error as needed
    }
  }

};

export default CurrencyModel;